name: Node.js CI

on: [push, pull_request]

jobs:
    lint:
        runs-on: ubuntu-latest
        timeout-minutes: 5
        env:
            CI: true

        steps:
            - name: Checkout
              uses: actions/checkout@v5
            - uses: actions/setup-node@v5
              with:
                  node-version-file: package.json
                  cache: "npm"
            - name: Install
              run: npm install
            - name: Check Linting
              run: npm run lint

    test:
        runs-on: ubuntu-latest
        timeout-minutes: 5
        env:
            CI: true

        steps:
            - name: Checkout
              uses: actions/checkout@v5
            - uses: actions/setup-node@v5
              with:
                  node-version-file: package.json
                  cache: "npm"
            - name: Install
              run: npm install
            - name: Run tests
              run: npm run test-ci

    # build:
    #     runs-on: ubuntu-latest
    #     timeout-minutes: 5
    #     env:
    #         CI: true

    #     steps:
    #         - name: Checkout
    #           uses: actions/checkout@v4
    #         - uses: actions/setup-node@v5
    #           with:
    #               node-version-file: package.json
    #               cache: "npm"
    #         - name: Build
    #           run: npm run build
    #         - name: Check for uncommitted changes
    #           id: check-changes
    #           uses: mskri/check-uncommitted-changes-action@v1.0.1
    #         - name: There are uncommited changes
    #           if: steps.check-changes.outputs.changes != ''
    #           run: exit 1
